(this["webpackJsonp185-movie-graph"]=this["webpackJsonp185-movie-graph"]||[]).push([[0],{44:function(t,e,a){t.exports=a(87)},49:function(t,e,a){},50:function(t,e,a){},87:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),c=(a(49),a(50),a(16)),u=a(93),s=a(94),l=a(41),p=a(95),f={apiKey:"AIzaSyA3PSDrSVY--kPeLB-6creeKMUc0jR-A5I",authDomain:"misha-site.firebaseapp.com",databaseURL:"https://misha-site.firebaseio.com"},d=a(38),m=a.n(d),v=a(18),h=a.n(v),y=a(86);var g=function(t){var e=this,a=Object(n.useState)([]),o=Object(c.a)(a,2),i=(o[0],o[1]),d=Object(n.useState)([]),v=Object(c.a)(d,2),g=(v[0],v[1]),b=Object(n.useState)({}),x=Object(c.a)(b,2),j=(x[0],x[1]),k=Object(n.useState)(""),w=Object(c.a)(k,2),E=w[0],O=w[1],S=Object(n.useState)(!0),A=Object(c.a)(S,2),B=A[0];function D(t){t.preventDefault(),function(){if(""===E)alert("ID cannot be empty.");else{if(9==E.length)return!0;alert("ID should be 9 characters.")}return!1}()&&(m.a.get("https://www.omdbapi.com/?apikey=fe15e914&i="+E).then((function(t){h.a.database().ref("GraphMovies/"+E).set(t.data)})),O(0),alert("New movie submitted."))}A[1],Object(n.useEffect)((function(){h.a.apps.length||h.a.initializeApp(f),h.a.database().ref("GraphMovies").once("value",(function(t){var e=t.val(),a=Object.keys(e);j(e);for(var n=[],r=[],o=function(){n.push({type:"movie",id:a[c],poster:e[a[c]].Poster});for(var t=e[a[c]].Actors.split(", "),o=function(e){n.some((function(a){return a.id===t[e]}))||n.push({type:"actor",id:t[e]}),r.push({source:a[c],target:t[e]})},i=0;i<t.length;i++)o(i)},c=0;c<a.length;c++)o();i(n),g(r),document.getElementById("svg").appendChild(M(n,r))}))}),[B]);var M=function(t,a){var n=t.map((function(t){return Object.create(t)})),r=a.map((function(t){return Object.create(t)})),o=y.create("svg").attr("viewBox",[0,0,2e3,1e3]),i=o.append("svg:defs");t.forEach((function(t,e){"movie"===t.type&&i.append("svg:pattern").attr("id","poster_"+t.id).attr("width",1).attr("height",1).attr("patternUnits","objectBoundingBox").append("svg:image").attr("xlink:href",t.poster).attr("width",300).attr("height",300).attr("x",-50).attr("y",-50)}));var c=o.append("g").attr("stroke","#999").attr("stroke-opacity",.5).selectAll("line").data(r).join("line").attr("stroke-width",4),u=y.forceSimulation(n).force("link",y.forceLink().links(a).id((function(t){return t.id})).distance(180)).force("charge",y.forceManyBody()).force("center",y.forceCenter(1e3,500)),s=o.append("text").attr("id","label").attr("font-size",30).attr("opacity",0).style("text-anchor","middle").text(""),l=o.append("g").selectAll("circle").data(n).join("circle").attr("r",(function(t){return"movie"===t.type?90:"actor"===t.type?20:void 0})).style("fill",(function(t){return"movie"===t.type?"url(#poster_"+t.id+")":"actor"===t.type?"steelblue":void 0})).call(function(t,e){return y.drag().on("start",(function(e){y.event.active||(t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y)})).on("drag",(function(t){t.fx=y.event.x,t.fy=y.event.y,e.attr("x",t.x).attr("y",t.y-30)})).on("end",(function(e){y.event.active||t.alphaTarget(0),e.fx=null,e.fy=null}))}(u,s));return l.on("mouseover",(function(t){if("actor"===t.type){y.select(e);s.raise().attr("opacity",1).attr("x",t.x).attr("y",t.y-25).text(t.id)}})).on("mouseout",(function(t){"actor"===t.type&&s.attr("opacity",0).text(t.id)})),u.on("tick",(function(){c.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),l.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))})),o.node()};return r.a.createElement("div",null,r.a.createElement(u.a,{bg:"light",expand:"lg"},"Misha's Movie Graph App",r.a.createElement(s.a,{inline:!0,className:"m-a",onSubmit:function(t){return t.preventDefault()}},r.a.createElement(l.a,{className:"ml-5",type:"text",onChange:function(t){t.preventDefault(),console.log(t.target.value),O(t.target.value)}}),r.a.createElement(p.a,{className:"ml-5",variant:"outline-success",onClick:function(t){return D(t)}}," Submit Movie ID "))),r.a.createElement("div",{id:"svg"}))};a(85);var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.e080bb78.chunk.js.map